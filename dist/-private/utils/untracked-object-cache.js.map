{"version":3,"file":"untracked-object-cache.js","sources":["../../../src/-private/utils/untracked-object-cache.js"],"sourcesContent":["import normalizeIdentifier from './normalize-identifier';\n\nfunction isAnObject(identifier) {\n  return (\n    identifier !== undefined &&\n    identifier !== null &&\n    (typeof identifier === 'object' || identifier.then)\n  );\n}\n\n/**\n * This class caches things based on a strings or objects. You shouldn't have to interact with this class.\n * @private\n * @class UntrackedObjectCache\n */\nexport default class UntrackedObjectCache {\n  objectCache = new WeakMap();\n  keyCache = {};\n  name = 'ember-stereo:untracked-object-cache';\n\n  has(_identifier) {\n    let identifier = normalizeIdentifier(_identifier);\n    if (isAnObject(identifier)) {\n      return this.objectCache.has(identifier);\n    } else {\n      return identifier in this.keyCache;\n    }\n  }\n\n  find(_identifier) {\n    let identifier = normalizeIdentifier(_identifier);\n\n    if (isAnObject(identifier) && this.objectCache.has(identifier)) {\n      return this.objectCache.get(identifier);\n    } else if (this.keyCache[identifier]) {\n      return this.keyCache[identifier];\n    }\n  }\n\n  remove(_identifier) {\n    let identifier = normalizeIdentifier(_identifier);\n\n    if (isAnObject(identifier) && this.objectCache.has(identifier)) {\n      this.objectCache.delete(identifier);\n    }\n    if (this.keyCache[identifier]) {\n      delete this.keyCache[identifier];\n    }\n  }\n\n  store(_identifier, value) {\n    let identifier = normalizeIdentifier(_identifier);\n\n    if (identifier) {\n      if (isAnObject(identifier)) {\n        this.objectCache.set(identifier, value);\n      } else {\n        this.keyCache[identifier] = value;\n      }\n    }\n  }\n}\n"],"names":["isAnObject","identifier","undefined","then","UntrackedObjectCache","constructor","_defineProperty","WeakMap","has","_identifier","normalizeIdentifier","objectCache","keyCache","find","get","remove","delete","store","value","set"],"mappings":";;;AAEA,SAASA,UAAUA,CAACC,UAAU,EAAE;AAC9B,EAAA,OACEA,UAAU,KAAKC,SAAS,IACxBD,UAAU,KAAK,IAAI,KAClB,OAAOA,UAAU,KAAK,QAAQ,IAAIA,UAAU,CAACE,IAAI,CAAC,CAAA;AAEvD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACe,MAAMC,oBAAoB,CAAC;EAAAC,WAAA,GAAA;AAAAC,IAAAA,eAAA,CAC1B,IAAA,EAAA,aAAA,EAAA,IAAIC,OAAO,EAAE,CAAA,CAAA;IAAAD,eAAA,CAAA,IAAA,EAAA,UAAA,EAChB,EAAE,CAAA,CAAA;AAAAA,IAAAA,eAAA,eACN,qCAAqC,CAAA,CAAA;AAAA,GAAA;EAE5CE,GAAGA,CAACC,WAAW,EAAE;AACf,IAAA,IAAIR,UAAU,GAAGS,mBAAmB,CAACD,WAAW,CAAC,CAAA;AACjD,IAAA,IAAIT,UAAU,CAACC,UAAU,CAAC,EAAE;AAC1B,MAAA,OAAO,IAAI,CAACU,WAAW,CAACH,GAAG,CAACP,UAAU,CAAC,CAAA;AACzC,KAAC,MAAM;AACL,MAAA,OAAOA,UAAU,IAAI,IAAI,CAACW,QAAQ,CAAA;AACpC,KAAA;AACF,GAAA;EAEAC,IAAIA,CAACJ,WAAW,EAAE;AAChB,IAAA,IAAIR,UAAU,GAAGS,mBAAmB,CAACD,WAAW,CAAC,CAAA;AAEjD,IAAA,IAAIT,UAAU,CAACC,UAAU,CAAC,IAAI,IAAI,CAACU,WAAW,CAACH,GAAG,CAACP,UAAU,CAAC,EAAE;AAC9D,MAAA,OAAO,IAAI,CAACU,WAAW,CAACG,GAAG,CAACb,UAAU,CAAC,CAAA;KACxC,MAAM,IAAI,IAAI,CAACW,QAAQ,CAACX,UAAU,CAAC,EAAE;AACpC,MAAA,OAAO,IAAI,CAACW,QAAQ,CAACX,UAAU,CAAC,CAAA;AAClC,KAAA;AACF,GAAA;EAEAc,MAAMA,CAACN,WAAW,EAAE;AAClB,IAAA,IAAIR,UAAU,GAAGS,mBAAmB,CAACD,WAAW,CAAC,CAAA;AAEjD,IAAA,IAAIT,UAAU,CAACC,UAAU,CAAC,IAAI,IAAI,CAACU,WAAW,CAACH,GAAG,CAACP,UAAU,CAAC,EAAE;AAC9D,MAAA,IAAI,CAACU,WAAW,CAACK,MAAM,CAACf,UAAU,CAAC,CAAA;AACrC,KAAA;AACA,IAAA,IAAI,IAAI,CAACW,QAAQ,CAACX,UAAU,CAAC,EAAE;AAC7B,MAAA,OAAO,IAAI,CAACW,QAAQ,CAACX,UAAU,CAAC,CAAA;AAClC,KAAA;AACF,GAAA;AAEAgB,EAAAA,KAAKA,CAACR,WAAW,EAAES,KAAK,EAAE;AACxB,IAAA,IAAIjB,UAAU,GAAGS,mBAAmB,CAACD,WAAW,CAAC,CAAA;AAEjD,IAAA,IAAIR,UAAU,EAAE;AACd,MAAA,IAAID,UAAU,CAACC,UAAU,CAAC,EAAE;QAC1B,IAAI,CAACU,WAAW,CAACQ,GAAG,CAAClB,UAAU,EAAEiB,KAAK,CAAC,CAAA;AACzC,OAAC,MAAM;AACL,QAAA,IAAI,CAACN,QAAQ,CAACX,UAAU,CAAC,GAAGiB,KAAK,CAAA;AACnC,OAAA;AACF,KAAA;AACF,GAAA;AACF;;;;"}