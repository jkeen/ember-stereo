{"version":3,"file":"resolve-urls.js","sources":["../../../src/-private/utils/resolve-urls.js"],"sourcesContent":["import { A as emberArray, makeArray } from '@ember/array';\nimport { isEmpty } from '@ember/utils';\nimport StereoUrl from './stereo-url';\n\n/**\n * URLs given to load or play may be a promise, resolve this promise and get the urls\n * or promisify an array/string and return a promise resolving to a cleaned up array of URLS\n * @method resolveUrls\n * @param {Array or String or Promise} urlOrPromise\n * @private\n * @return {Promise.<urls>}\n */\n\nfunction prepare(urls) {\n  return emberArray(makeArray(urls))\n    .uniq()\n    .reject((i) => isEmpty(i));\n}\n\nfunction resolveFunction(urlsOrPromise) {\n  if (typeof urlsOrPromise === 'function' && !urlsOrPromise.then) {\n    return urlsOrPromise();\n  } else {\n    return urlsOrPromise;\n  }\n}\n\nexport default async function resolveUrls(urlsOrPromise) {\n  let resolved = await Promise.resolve(resolveFunction(urlsOrPromise));\n  let rawUrls = prepare(resolved);\n  let resolvedUrls = rawUrls.map((u) => new StereoUrl(u)); // keep custom mime type in there if provided\n\n  return resolvedUrls;\n}\n"],"names":["prepare","urls","emberArray","makeArray","uniq","reject","i","isEmpty","resolveFunction","urlsOrPromise","then","resolveUrls","resolved","Promise","resolve","rawUrls","resolvedUrls","map","u","StereoUrl"],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,OAAOA,CAACC,IAAI,EAAE;EACrB,OAAOC,CAAU,CAACC,SAAS,CAACF,IAAI,CAAC,CAAC,CAC/BG,IAAI,EAAE,CACNC,MAAM,CAAEC,CAAC,IAAKC,OAAO,CAACD,CAAC,CAAC,CAAC,CAAA;AAC9B,CAAA;AAEA,SAASE,eAAeA,CAACC,aAAa,EAAE;EACtC,IAAI,OAAOA,aAAa,KAAK,UAAU,IAAI,CAACA,aAAa,CAACC,IAAI,EAAE;IAC9D,OAAOD,aAAa,EAAE,CAAA;AACxB,GAAC,MAAM;AACL,IAAA,OAAOA,aAAa,CAAA;AACtB,GAAA;AACF,CAAA;AAEe,eAAeE,WAAWA,CAACF,aAAa,EAAE;EACvD,IAAIG,QAAQ,GAAG,MAAMC,OAAO,CAACC,OAAO,CAACN,eAAe,CAACC,aAAa,CAAC,CAAC,CAAA;AACpE,EAAA,IAAIM,OAAO,GAAGf,OAAO,CAACY,QAAQ,CAAC,CAAA;AAC/B,EAAA,IAAII,YAAY,GAAGD,OAAO,CAACE,GAAG,CAAEC,CAAC,IAAK,IAAIC,SAAS,CAACD,CAAC,CAAC,CAAC,CAAC;;AAExD,EAAA,OAAOF,YAAY,CAAA;AACrB;;;;"}