{"version":3,"file":"one-at-a-time.js","sources":["../../../src/-private/utils/one-at-a-time.js"],"sourcesContent":["import { A as emberArray } from '@ember/array';\nimport debug from 'debug';\nimport hasEqualUrls from './has-equal-urls';\nimport { inject as service } from '@ember/service';\nexport default class OneAtATime {\n  @service stereo;\n\n  constructor() {\n    this.sounds = emberArray();\n  }\n\n  register(sound) {\n    let sounds = this.sounds;\n    sound.on('audio-played', () => this.pauseAll(sound));\n    if (!sounds.includes(sound)) {\n      sounds.pushObject(sound);\n    }\n  }\n\n  pauseAll(sound) {\n    this.sounds.forEach((s) => {\n      if (!hasEqualUrls(s.url, sound.url)) {\n        debug('ember-stereo:one-at-at-time')(`pausing ${s.url}`);\n        s.pause();\n      }\n    });\n    debug('ember-stereo:one-at-at-time')(`playing ${sound.url}`);\n  }\n}\n"],"names":["OneAtATime","_class","constructor","_initializerDefineProperty","_descriptor","sounds","emberArray","register","sound","on","pauseAll","includes","pushObject","forEach","s","hasEqualUrls","url","debug","pause","_applyDecoratedDescriptor","prototype","service","configurable","enumerable","writable","initializer"],"mappings":";;;;;;;AAGmD,IAC9BA,UAAU,IAAAC,MAAA,GAAhB,MAAMD,UAAU,CAAC;AAG9BE,EAAAA,WAAWA,GAAG;AAAAC,IAAAA,0BAAA,iBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AACZ,IAAA,IAAI,CAACC,MAAM,GAAGC,CAAU,EAAE,CAAA;AAC5B,GAAA;EAEAC,QAAQA,CAACC,KAAK,EAAE;AACd,IAAA,IAAIH,MAAM,GAAG,IAAI,CAACA,MAAM,CAAA;AACxBG,IAAAA,KAAK,CAACC,EAAE,CAAC,cAAc,EAAE,MAAM,IAAI,CAACC,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAA;AACpD,IAAA,IAAI,CAACH,MAAM,CAACM,QAAQ,CAACH,KAAK,CAAC,EAAE;AAC3BH,MAAAA,MAAM,CAACO,UAAU,CAACJ,KAAK,CAAC,CAAA;AAC1B,KAAA;AACF,GAAA;EAEAE,QAAQA,CAACF,KAAK,EAAE;AACd,IAAA,IAAI,CAACH,MAAM,CAACQ,OAAO,CAAEC,CAAC,IAAK;MACzB,IAAI,CAACC,YAAY,CAACD,CAAC,CAACE,GAAG,EAAER,KAAK,CAACQ,GAAG,CAAC,EAAE;QACnCC,KAAK,CAAC,6BAA6B,CAAC,CAAE,WAAUH,CAAC,CAACE,GAAI,CAAA,CAAC,CAAC,CAAA;QACxDF,CAAC,CAACI,KAAK,EAAE,CAAA;AACX,OAAA;AACF,KAAC,CAAC,CAAA;IACFD,KAAK,CAAC,6BAA6B,CAAC,CAAE,WAAUT,KAAK,CAACQ,GAAI,CAAA,CAAC,CAAC,CAAA;AAC9D,GAAA;AACF,CAAC,GAAAZ,WAAA,GAAAe,yBAAA,CAAAlB,MAAA,CAAAmB,SAAA,EAAA,QAAA,EAAA,CAvBEC,MAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAA,CAAA,GAAAxB,MAAA;;;;"}