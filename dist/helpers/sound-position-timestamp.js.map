{"version":3,"file":"sound-position-timestamp.js","sources":["../../src/helpers/sound-position-timestamp.js"],"sourcesContent":["import StereoBaseIsHelper from '../-private/helpers/is-helper';\nimport { add } from 'date-fns';\n\n/**\n  A helper to get a sound's position timestamp based on the playingDate property in an HLS file, or from the position + a startsAt parameter.\n  ```hbs\n\n  this.startsAt = new Date('2024-10-01T00:00:00Z');\n  {{sound-position-timestamp @identifier}} #=> playingDate property from HLS\n  {{sound-position-timestamp @identifier startsAt=this.startsAt}} #=> new Date('2024-10-01T00:00:00Z')\n   ```\n\n  @class {{sound-position-timestamp}}\n  @type {Helper}\n  @param {Any} identifier url, urls, url objects, promise that resolves to a url\n  @param {Date} startsAt required if currentTime is not provided\n  @param {Float} position\n  @param {Date} currentTime\n  @return {Date}\n*/\nexport default class SoundPositionTimestamp extends StereoBaseIsHelper {\n  name = 'sound-position-timestamp';\n\n  get result() {\n    let result;\n    let position = this.options?.position || this.sound?.position || 0;\n    let currentTime = this.sound?.currentTime;\n    let startsAt = this.options?.startsAt;\n\n    if (currentTime && this.sound?.isLoaded) {\n      result = new Date(currentTime);\n    } else if (startsAt) {\n      result = add(new Date(startsAt), {\n        seconds: position / 1000,\n      });\n    }\n\n    if (result instanceof Date && !isNaN(result)) {\n      return result;\n    } else {\n      return undefined;\n    }\n  }\n}\n"],"names":["SoundPositionTimestamp","StereoBaseIsHelper","constructor","args","_defineProperty","result","position","options","sound","currentTime","startsAt","isLoaded","Date","add","seconds","isNaN","undefined"],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMA,sBAAsB,SAASC,kBAAkB,CAAC;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,eAC9D,0BAA0B,CAAA,CAAA;AAAA,GAAA;EAEjC,IAAIC,MAAMA,GAAG;AACX,IAAA,IAAIA,MAAM,CAAA;AACV,IAAA,IAAIC,QAAQ,GAAG,IAAI,CAACC,OAAO,EAAED,QAAQ,IAAI,IAAI,CAACE,KAAK,EAAEF,QAAQ,IAAI,CAAC,CAAA;AAClE,IAAA,IAAIG,WAAW,GAAG,IAAI,CAACD,KAAK,EAAEC,WAAW,CAAA;AACzC,IAAA,IAAIC,QAAQ,GAAG,IAAI,CAACH,OAAO,EAAEG,QAAQ,CAAA;AAErC,IAAA,IAAID,WAAW,IAAI,IAAI,CAACD,KAAK,EAAEG,QAAQ,EAAE;AACvCN,MAAAA,MAAM,GAAG,IAAIO,IAAI,CAACH,WAAW,CAAC,CAAA;KAC/B,MAAM,IAAIC,QAAQ,EAAE;MACnBL,MAAM,GAAGQ,GAAG,CAAC,IAAID,IAAI,CAACF,QAAQ,CAAC,EAAE;QAC/BI,OAAO,EAAER,QAAQ,GAAG,IAAA;AACtB,OAAC,CAAC,CAAA;AACJ,KAAA;IAEA,IAAID,MAAM,YAAYO,IAAI,IAAI,CAACG,KAAK,CAACV,MAAM,CAAC,EAAE;AAC5C,MAAA,OAAOA,MAAM,CAAA;AACf,KAAC,MAAM;AACL,MAAA,OAAOW,SAAS,CAAA;AAClB,KAAA;AACF,GAAA;AACF;;;;"}