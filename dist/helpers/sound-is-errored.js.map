{"version":3,"file":"sound-is-errored.js","sources":["../../src/helpers/sound-is-errored.js"],"sourcesContent":["import Helper from '@ember/component/helper';\nimport { dedupeTracked } from 'tracked-toolbox';\nimport hasEqualUrls from '../-private/utils/has-equal-urls';\nimport { inject as service } from '@ember/service';\n\n/**\n  A helper to detect if a sound is errored.\n  ```hbs\n    {{#if (sound-is-errored @identifier)}}\n      <p>This sound is errored</p>\n    {{else}}\n      <p>This sound is not errored</p>\n    {{/if}}\n  ```\n\n  @class {{sound-is-errored}}\n  @type {Helper}\n  @param {String} url\n*/\n\nconst UNINITIALIZED = Object.freeze({});\n\n/**\n  @method compute\n  @param {Any} identifier url, urls, url objects, promise that resolves to a url\n  @param {String} format time, ms, s,\n  @param {Boolean} load load the sound if it's not loaded?\n*/\nexport default class SoundIsErrored extends Helper {\n  name = 'sound-is-errored';\n  @service stereo;\n  @dedupeTracked result = false;\n  identifier = UNINITIALIZED;\n\n  compute([identifier = 'system'], { connectionName }) {\n    let errors = this.stereo.cachedErrors.filter(async (e) =>\n      hasEqualUrls(e.url, identifier)\n    );\n\n    if (connectionName) {\n      return (\n        errors.filter((e) => e.connectionName === connectionName).length > 0\n      );\n    } else {\n      return errors.length > 0;\n    }\n  }\n}\n"],"names":["UNINITIALIZED","Object","freeze","SoundIsErrored","_class","Helper","constructor","args","_defineProperty","_initializerDefineProperty","_descriptor","_descriptor2","compute","identifier","connectionName","errors","stereo","cachedErrors","filter","e","hasEqualUrls","url","length","_applyDecoratedDescriptor","prototype","service","configurable","enumerable","writable","initializer","dedupeTracked"],"mappings":";;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,aAAa,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,CAAC,CAAA;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACqBC,IAAAA,cAAc,IAAAC,MAAA,GAApB,MAAMD,cAAc,SAASE,MAAM,CAAC;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,eAC1C,kBAAkB,CAAA,CAAA;AAAAC,IAAAA,0BAAA,iBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAAD,IAAAA,0BAAA,iBAAAE,YAAA,EAAA,IAAA,CAAA,CAAA;AAAAH,IAAAA,eAAA,qBAGZR,aAAa,CAAA,CAAA;AAAA,GAAA;AAE1BY,EAAAA,OAAOA,CAAC,CAACC,UAAU,GAAG,QAAQ,CAAC,EAAE;AAAEC,IAAAA,cAAAA;AAAe,GAAC,EAAE;IACnD,IAAIC,MAAM,GAAG,IAAI,CAACC,MAAM,CAACC,YAAY,CAACC,MAAM,CAAC,MAAOC,CAAC,IACnDC,YAAY,CAACD,CAAC,CAACE,GAAG,EAAER,UAAU,CAChC,CAAC,CAAA;AAED,IAAA,IAAIC,cAAc,EAAE;AAClB,MAAA,OACEC,MAAM,CAACG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACL,cAAc,KAAKA,cAAc,CAAC,CAACQ,MAAM,GAAG,CAAC,CAAA;AAExE,KAAC,MAAM;AACL,MAAA,OAAOP,MAAM,CAACO,MAAM,GAAG,CAAC,CAAA;AAC1B,KAAA;AACF,GAAA;AACF,CAAC,GAAAZ,WAAA,GAAAa,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,EAAA,QAAA,EAAA,CAjBEC,MAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAAlB,CAAAA,EAAAA,YAAA,GAAAY,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,aACPM,aAAa,CAAA,EAAA;EAAAJ,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAU,KAAK,CAAA;AAAA,GAAA;AAAA,CAAA,CAAA,GAAAzB,MAAA;;;;"}