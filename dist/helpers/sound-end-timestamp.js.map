{"version":3,"file":"sound-end-timestamp.js","sources":["../../src/helpers/sound-end-timestamp.js"],"sourcesContent":["import StereoBaseIsHelper from '../-private/helpers/is-helper';\nimport { add } from 'date-fns';\n\n/**\n  A helper to get a sound's position timestamp based on the playingDate property in an HLS file, or from the position + a startsAt parameter.\n  ```hbs\n\n  this.endsAt = new Date('2024-10-01T00:00:00Z'); // fallback\n  {{sound-end-timestamp @identifier}} #=> playingDate property from HLS\n  {{sound-end-timestamp @identifier endsAt=this.endsAt}} #=> new Date('2024-10-01T00:00:00Z')\n   ```\n\n  @class {{sound-end-timestamp}}\n  @type {Helper}\n  @param {Any} identifier url, urls, url objects, promise that resolves to a url\n  @param {Date} startsAt required if currentTime is not provided\n  @param {Float} position\n  @param {Date} currentTime\n  @return {Date}\n*/\nexport default class SoundEndTimestamp extends StereoBaseIsHelper {\n  name = 'sound-end-timestamp';\n\n  get result() {\n    let result;\n    if (this.sound?.endTime && this.sound?.isLoaded) {\n      result = new Date(this.sound.endTime);\n    } else if (this.options?.endsAt) {\n      return new Date(this.options?.endsAt);\n    } else if (this.options?.startsAt) {\n      // no end time available\n      result = add(new Date(this.options?.startsAt), {\n        seconds: this.sound.duration / 1000,\n      });\n    }\n\n    if (result instanceof Date && !isNaN(result)) {\n      return result;\n    } else {\n      return undefined;\n    }\n  }\n}\n"],"names":["SoundEndTimestamp","StereoBaseIsHelper","constructor","args","_defineProperty","result","sound","endTime","isLoaded","Date","options","endsAt","startsAt","add","seconds","duration","isNaN","undefined"],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMA,iBAAiB,SAASC,kBAAkB,CAAC;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,eACzD,qBAAqB,CAAA,CAAA;AAAA,GAAA;EAE5B,IAAIC,MAAMA,GAAG;AACX,IAAA,IAAIA,MAAM,CAAA;IACV,IAAI,IAAI,CAACC,KAAK,EAAEC,OAAO,IAAI,IAAI,CAACD,KAAK,EAAEE,QAAQ,EAAE;MAC/CH,MAAM,GAAG,IAAII,IAAI,CAAC,IAAI,CAACH,KAAK,CAACC,OAAO,CAAC,CAAA;AACvC,KAAC,MAAM,IAAI,IAAI,CAACG,OAAO,EAAEC,MAAM,EAAE;MAC/B,OAAO,IAAIF,IAAI,CAAC,IAAI,CAACC,OAAO,EAAEC,MAAM,CAAC,CAAA;AACvC,KAAC,MAAM,IAAI,IAAI,CAACD,OAAO,EAAEE,QAAQ,EAAE;AACjC;AACAP,MAAAA,MAAM,GAAGQ,GAAG,CAAC,IAAIJ,IAAI,CAAC,IAAI,CAACC,OAAO,EAAEE,QAAQ,CAAC,EAAE;AAC7CE,QAAAA,OAAO,EAAE,IAAI,CAACR,KAAK,CAACS,QAAQ,GAAG,IAAA;AACjC,OAAC,CAAC,CAAA;AACJ,KAAA;IAEA,IAAIV,MAAM,YAAYI,IAAI,IAAI,CAACO,KAAK,CAACX,MAAM,CAAC,EAAE;AAC5C,MAAA,OAAOA,MAAM,CAAA;AACf,KAAC,MAAM;AACL,MAAA,OAAOY,SAAS,CAAA;AAClB,KAAA;AACF,GAAA;AACF;;;;"}