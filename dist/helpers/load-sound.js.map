{"version":3,"file":"load-sound.js","sources":["../../src/helpers/load-sound.js"],"sourcesContent":["import { inject as service } from '@ember/service';\nimport Helper from '@ember/component/helper';\nimport prepareOptions from '../-private/utils/prepare-options';\nimport { didCancel } from 'ember-concurrency';\n/**\n  A helper to load a sound\n  ```hbs\n    <button {{on 'click' (load-sound @identifier}}>\n      Load\n    </button>\n  ```\n  @class {{load-sound}}\n  @type {Helper}\n  */\nexport default class LoadSound extends Helper {\n  @service stereo;\n\n  /**\n    @method compute\n    @param {Any} identifier url, urls, url objects, promise that resolves to a url\n    @param {Hash} metadata? metadata that should be included with the sound\n    @param {[String]} useConnections? array of connection names in preference order\n    @param {[String]} xhr? hash of xhr options: { method: 'POST', headers: { Authorization: 'Bearer 1234'}, withCredentials: true }\n    @return {Function}\n  */\n\n  compute([urls], options = {}) {\n    options = prepareOptions(options);\n\n    return () => {\n      try {\n        return this.stereo.load(urls, options).then((result) => result.sound);\n      } catch (e) {\n        if (!didCancel(e)) {\n          throw e;\n        }\n      }\n    };\n  }\n}\n"],"names":["LoadSound","_class","Helper","constructor","args","_initializerDefineProperty","_descriptor","compute","urls","options","prepareOptions","stereo","load","then","result","sound","e","didCancel","_applyDecoratedDescriptor","prototype","service","configurable","enumerable","writable","initializer"],"mappings":";;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACqBA,IAAAA,SAAS,IAAAC,MAAA,GAAf,MAAMD,SAAS,SAASE,MAAM,CAAC;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,0BAAA,iBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAA,GAAA;AAG5C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;EAEEC,OAAOA,CAAC,CAACC,IAAI,CAAC,EAAEC,OAAO,GAAG,EAAE,EAAE;AAC5BA,IAAAA,OAAO,GAAGC,cAAc,CAACD,OAAO,CAAC,CAAA;AAEjC,IAAA,OAAO,MAAM;MACX,IAAI;AACF,QAAA,OAAO,IAAI,CAACE,MAAM,CAACC,IAAI,CAACJ,IAAI,EAAEC,OAAO,CAAC,CAACI,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACC,KAAK,CAAC,CAAA;OACtE,CAAC,OAAOC,CAAC,EAAE;AACV,QAAA,IAAI,CAACC,SAAS,CAACD,CAAC,CAAC,EAAE;AACjB,UAAA,MAAMA,CAAC,CAAA;AACT,SAAA;AACF,OAAA;KACD,CAAA;AACH,GAAA;AACF,CAAC,GAAAV,WAAA,GAAAY,yBAAA,CAAAjB,MAAA,CAAAkB,SAAA,EAAA,QAAA,EAAA,CAxBEC,MAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAA,CAAA,GAAAvB,MAAA;;;;"}